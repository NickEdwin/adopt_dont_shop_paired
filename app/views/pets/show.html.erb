<main>
  <section class='page-header'>
    <h2 class='page-title'><%= @pet.name %></h2>
    <span>status: <strong><%= @pet.status %></strong></span>
  </section>
  <div id="flash-alert">
    <% if !!flash[:notice] %>
      <%= flash[:notice] %>
    <% end %>
  </div>

  <div>
    <% if @pet.status == "pending" %>
      <p>This pet is currently on hold for: <%= @applicants.map {|applicant| applicant.name}.pop %></p>
    <%  end %>
  </div>

  <section id='pet-detail'>

    <%= image_tag(@pet.image, alt: "photo of pet", method: :get, class: 'pet-image') %>

    <p><%= @pet.approx_age %> year(s), <%= @pet.sex %><br>
    <%= @pet.description %></p>

    <div class='options'>
      <%= link_to 'Update', "/pets/#{@pet.id}/edit" %>
      <%= link_to 'Delete', "/pets/#{@pet.id}", method: :delete %>
      <% if @fav_pet_objects.include?(@pet.id) %>
        <%= link_to 'Remove pet from favorites', "/favorites/#{@pet.id}", method: :delete %>
      <% else %>
        <%= link_to 'Add pet to favorites', "/favorites/#{@pet.id}", method: :post %>
      <% end %>
      <%= link_to 'See Applicants', "/applications?pet_id=#{@pet.id}" %>
    </div>
  </section>

  <section id='list-section'>
    <div class='page-header'>
      <h3 class='page-title'>Applicants for this Pet</h3>
    </div>
    <% if @applicants.any? %>
      <% @applicants.each do |applicant| %>
        <ul class='list'>
          <li><%= link_to "#{applicant.name}", "/applications/#{applicant.id}", class: 'list-name' %></li>
        </ul>
      <% end %>
    <% else %>
      <p>There are no current applications for this pet.</p>
    <% end %>
  </section>
</main>
